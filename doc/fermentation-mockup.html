<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chambre de Fermentation</title>
    <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --lcars-orange: #ff9900;
            --lcars-yellow: #ffcc00;
            --lcars-blue: #9999ff;
            --lcars-purple: #cc99cc;
            --lcars-red: #cc4444;
            --lcars-pink: #cc6699;
            --lcars-tan: #ffaa66;
            --lcars-lavender: #9977aa;
            --lcars-sky: #6688cc;
            --bg-primary: #000000;
            --bg-secondary: #0a0a12;
            --text-primary: #ff9900;
            --text-light: #ffcc99;
            --success: #55cc55;
            --warning: #ffcc00;
            --danger: #cc4444;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Antonio', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; }
        .lcars-container { display: grid; grid-template-columns: 180px 1fr; grid-template-rows: auto 1fr auto; min-height: 100vh; gap: 3px; padding: 10px; }
        .lcars-sidebar { grid-row: 1 / -1; display: flex; flex-direction: column; gap: 3px; }
        .lcars-sidebar-top { background: var(--lcars-purple); height: 120px; border-radius: 0 0 0 40px; position: relative; }
        .lcars-sidebar-top::after { content: ''; position: absolute; bottom: 0; right: 0; width: 60px; height: 40px; background: var(--bg-primary); border-radius: 40px 0 0 0; }
        .lcars-elbow { background: var(--lcars-orange); height: 80px; border-radius: 0 0 0 40px; position: relative; display: flex; align-items: center; padding-left: 15px; }
        .lcars-elbow::after { content: ''; position: absolute; bottom: 0; right: 0; width: 100px; height: 40px; background: var(--bg-primary); border-radius: 40px 0 0 0; }
        .lcars-elbow-text { font-family: 'Orbitron', sans-serif; font-size: 11px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 1px; z-index: 1; }
        .lcars-sidebar-buttons { flex: 1; display: flex; flex-direction: column; gap: 3px; }
        .lcars-btn { background: var(--lcars-tan); border: none; padding: 15px 10px; text-align: right; padding-right: 20px; font-family: 'Antonio', sans-serif; font-size: 16px; color: var(--bg-primary); cursor: pointer; text-transform: uppercase; letter-spacing: 2px; border-radius: 20px 0 0 20px; transition: all 0.15s; }
        .lcars-btn:hover { background: var(--lcars-yellow); padding-right: 30px; }
        .lcars-btn.active { background: var(--lcars-orange); }
        .lcars-btn-blue { background: var(--lcars-blue); }
        .lcars-btn-purple { background: var(--lcars-purple); }
        .lcars-btn-pink { background: var(--lcars-pink); }
        .lcars-btn-lavender { background: var(--lcars-lavender); }
        .lcars-sidebar-bottom { background: var(--lcars-blue); height: 100px; border-radius: 40px 0 0 0; position: relative; }
        .lcars-sidebar-bottom::before { content: ''; position: absolute; top: 0; right: 0; width: 60px; height: 40px; background: var(--bg-primary); border-radius: 0 0 0 40px; }
        .lcars-header { display: flex; gap: 3px; }
        .lcars-header-bar { background: var(--lcars-purple); height: 40px; flex: 1; display: flex; align-items: center; padding: 0 20px; }
        .lcars-header-title { font-family: 'Orbitron', sans-serif; font-size: 18px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 3px; }
        .lcars-header-cap { background: var(--lcars-orange); width: 120px; height: 40px; border-radius: 0 20px 20px 0; }
        .lcars-header-pill { background: var(--lcars-yellow); width: 80px; height: 40px; border-radius: 20px; }
        .lcars-main { background: var(--bg-secondary); border: 2px solid var(--lcars-orange); border-radius: 0 30px 30px 0; padding: 20px; overflow-y: auto; }
        .lcars-footer { display: flex; gap: 3px; }
        .lcars-footer-bar { background: var(--lcars-blue); height: 30px; flex: 1; display: flex; align-items: center; justify-content: flex-end; padding: 0 20px; }
        .lcars-footer-text { font-family: 'Orbitron', sans-serif; font-size: 10px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 2px; }
        .lcars-footer-cap { background: var(--lcars-tan); width: 80px; height: 30px; border-radius: 0 15px 15px 0; }
        .screen { display: none; }
        .screen.active { display: block; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .lcars-panel { background: rgba(255, 153, 0, 0.05); border: 1px solid var(--lcars-orange); border-radius: 0 20px 20px 0; overflow: hidden; }
        .lcars-panel-header { background: var(--lcars-orange); padding: 8px 15px; display: flex; justify-content: space-between; align-items: center; }
        .lcars-panel-title { font-family: 'Orbitron', sans-serif; font-size: 12px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 2px; }
        .lcars-panel-indicator { width: 12px; height: 12px; border-radius: 50%; background: var(--success); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .lcars-panel-content { padding: 20px; }
        .stat-display { text-align: center; padding: 10px 0; }
        .stat-value { font-family: 'Orbitron', sans-serif; font-size: 48px; font-weight: 700; color: var(--lcars-yellow); line-height: 1; }
        .stat-unit { font-size: 24px; color: var(--lcars-orange); }
        .stat-label { font-size: 14px; color: var(--lcars-tan); text-transform: uppercase; letter-spacing: 2px; margin-top: 5px; }
        .stat-target { font-size: 12px; color: var(--lcars-blue); margin-top: 5px; }
        .batch-info { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .batch-field { display: flex; flex-direction: column; gap: 3px; }
        .batch-label { font-size: 10px; color: var(--lcars-blue); text-transform: uppercase; letter-spacing: 1px; }
        .batch-value { font-family: 'Orbitron', sans-serif; font-size: 14px; color: var(--lcars-yellow); }
        .progress-container { margin-top: 15px; }
        .progress-header { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .progress-label { font-size: 12px; color: var(--lcars-tan); text-transform: uppercase; }
        .progress-value { font-family: 'Orbitron', sans-serif; font-size: 12px; color: var(--lcars-yellow); }
        .progress-bar { height: 20px; background: var(--bg-primary); border: 1px solid var(--lcars-orange); border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--lcars-orange), var(--lcars-yellow)); border-radius: 10px; }
        .actuators-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .actuator-item { display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 5px; }
        .actuator-indicator { width: 30px; height: 30px; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 14px; }
        .actuator-indicator.on { background: var(--success); color: var(--bg-primary); }
        .actuator-indicator.off { background: var(--bg-primary); border: 2px solid var(--lcars-orange); color: var(--lcars-orange); }
        .actuator-name { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; }
        .chart-container { height: 300px; margin-top: 20px; }
        .events-list { max-height: 200px; overflow-y: auto; }
        .event-item { display: flex; gap: 15px; padding: 10px; border-bottom: 1px solid var(--lcars-orange); }
        .event-time { font-family: 'Orbitron', sans-serif; font-size: 11px; color: var(--lcars-blue); white-space: nowrap; }
        .event-text { font-size: 13px; color: var(--text-light); }
        .add-event-btn { width: 100%; margin-top: 10px; padding: 12px; background: var(--lcars-sky); border: none; border-radius: 5px; font-family: 'Antonio', sans-serif; font-size: 14px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 2px; cursor: pointer; }
        .add-event-btn:hover { background: var(--lcars-blue); }
        .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 60vh; text-align: center; }
        .empty-icon { width: 150px; height: 150px; border: 4px solid var(--lcars-orange); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 30px; }
        .empty-icon::before { content: '+'; font-size: 80px; color: var(--lcars-orange); }
        .empty-title { font-family: 'Orbitron', sans-serif; font-size: 24px; color: var(--lcars-yellow); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 3px; }
        .empty-text { font-size: 16px; color: var(--lcars-tan); margin-bottom: 30px; }
        .lcars-btn-large { background: var(--lcars-orange); border: none; padding: 20px 50px; font-family: 'Orbitron', sans-serif; font-size: 18px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 3px; cursor: pointer; border-radius: 10px; transition: all 0.2s; }
        .lcars-btn-large:hover { background: var(--lcars-yellow); transform: scale(1.05); }
        .create-section { margin-bottom: 30px; }
        .section-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .section-number { width: 40px; height: 40px; background: var(--lcars-orange); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Orbitron', sans-serif; font-size: 18px; color: var(--bg-primary); }
        .section-title { font-family: 'Orbitron', sans-serif; font-size: 16px; color: var(--lcars-yellow); text-transform: uppercase; letter-spacing: 2px; }
        .preset-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
        .preset-card { background: rgba(255, 153, 0, 0.05); border: 2px solid var(--lcars-orange); border-radius: 10px; padding: 20px 15px; text-align: center; cursor: pointer; transition: all 0.2s; }
        .preset-card:hover { background: rgba(255, 153, 0, 0.15); transform: translateY(-3px); }
        .preset-card.selected { background: var(--lcars-orange); }
        .preset-card.selected .preset-name, .preset-card.selected .preset-code { color: var(--bg-primary); }
        .preset-icon { font-size: 32px; margin-bottom: 10px; }
        .preset-name { font-size: 14px; color: var(--lcars-yellow); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .preset-code { font-family: 'Orbitron', sans-serif; font-size: 11px; color: var(--lcars-blue); }
        .steps-container { display: flex; flex-direction: column; gap: 15px; }
        .step-card { background: rgba(153, 153, 255, 0.05); border: 1px solid var(--lcars-blue); border-radius: 0 15px 15px 0; overflow: hidden; }
        .step-header { background: var(--lcars-blue); padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; }
        .step-title { font-family: 'Orbitron', sans-serif; font-size: 12px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 1px; }
        .step-delete { background: var(--lcars-red); border: none; width: 24px; height: 24px; border-radius: 50%; color: white; cursor: pointer; font-size: 14px; }
        .step-content { padding: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .form-group { display: flex; flex-direction: column; gap: 5px; }
        .form-label { font-size: 11px; color: var(--lcars-tan); text-transform: uppercase; letter-spacing: 1px; }
        .form-input { background: var(--bg-primary); border: 1px solid var(--lcars-orange); border-radius: 5px; padding: 10px 12px; font-family: 'Orbitron', sans-serif; font-size: 14px; color: var(--lcars-yellow); outline: none; }
        .form-input:focus { border-color: var(--lcars-yellow); box-shadow: 0 0 10px rgba(255, 204, 0, 0.3); }
        .form-select { background: var(--bg-primary); border: 1px solid var(--lcars-orange); border-radius: 5px; padding: 10px 12px; font-family: 'Antonio', sans-serif; font-size: 14px; color: var(--lcars-yellow); cursor: pointer; }
        .add-step-btn { background: transparent; border: 2px dashed var(--lcars-blue); border-radius: 10px; padding: 20px; color: var(--lcars-blue); font-family: 'Antonio', sans-serif; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; width: 100%; }
        .add-step-btn:hover { background: rgba(153, 153, 255, 0.1); border-style: solid; }
        .ingredient-card { background: rgba(204, 153, 204, 0.05); border: 1px solid var(--lcars-purple); border-radius: 0 15px 15px 0; overflow: hidden; margin-bottom: 15px; }
        .ingredient-header { background: var(--lcars-purple); padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; }
        .ingredient-title { font-family: 'Orbitron', sans-serif; font-size: 12px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 1px; }
        .ingredient-content { padding: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        .batch-naming { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; align-items: end; }
        .batch-number-display { background: var(--bg-primary); border: 2px solid var(--lcars-yellow); border-radius: 10px; padding: 15px; text-align: center; }
        .batch-number-value { font-family: 'Orbitron', sans-serif; font-size: 24px; color: var(--lcars-yellow); }
        .action-buttons { display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--lcars-orange); }
        .btn-cancel { background: var(--lcars-lavender); border: none; padding: 15px 30px; font-family: 'Antonio', sans-serif; font-size: 14px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 2px; cursor: pointer; border-radius: 5px; }
        .btn-start { background: var(--success); border: none; padding: 15px 40px; font-family: 'Orbitron', sans-serif; font-size: 14px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 2px; cursor: pointer; border-radius: 5px; transition: all 0.2s; }
        .btn-start:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(85, 204, 85, 0.5); }
        .eval-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .eval-criteria { display: flex; flex-direction: column; gap: 20px; }
        .criteria-item { background: rgba(255, 153, 0, 0.05); border: 1px solid var(--lcars-orange); border-radius: 10px; padding: 15px; }
        .criteria-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .criteria-name { font-size: 14px; color: var(--lcars-yellow); text-transform: uppercase; letter-spacing: 1px; }
        .criteria-score { display: flex; gap: 5px; }
        .star { width: 24px; height: 24px; background: var(--bg-primary); border: 2px solid var(--lcars-orange); border-radius: 3px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; }
        .star.filled { background: var(--lcars-orange); color: var(--bg-primary); }
        .star:hover { transform: scale(1.1); }
        .criteria-comment { width: 100%; background: var(--bg-primary); border: 1px solid var(--lcars-tan); border-radius: 5px; padding: 8px; font-family: 'Antonio', sans-serif; font-size: 13px; color: var(--text-light); resize: none; }
        .photo-upload { border: 2px dashed var(--lcars-purple); border-radius: 15px; padding: 30px; text-align: center; cursor: pointer; }
        .photo-upload:hover { background: rgba(204, 153, 204, 0.1); border-style: solid; }
        .photo-icon { font-size: 48px; margin-bottom: 15px; }
        .photo-text { color: var(--lcars-purple); text-transform: uppercase; letter-spacing: 1px; }
        .photo-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
        .photo-thumb { aspect-ratio: 1; background: var(--bg-secondary); border: 1px solid var(--lcars-purple); border-radius: 5px; display: flex; align-items: center; justify-content: center; color: var(--lcars-purple); }
        .notes-textarea { width: 100%; height: 150px; background: var(--bg-primary); border: 1px solid var(--lcars-orange); border-radius: 10px; padding: 15px; font-family: 'Antonio', sans-serif; font-size: 14px; color: var(--text-light); resize: vertical; }
        .tags-container { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px; }
        .tag { background: var(--lcars-sky); color: var(--bg-primary); padding: 5px 15px; border-radius: 15px; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; }
        .tag.selected { background: var(--lcars-orange); }
        .tag-input { background: transparent; border: 1px dashed var(--lcars-sky); border-radius: 15px; padding: 5px 15px; font-family: 'Antonio', sans-serif; font-size: 12px; color: var(--lcars-sky); outline: none; width: 120px; }
        .history-filters { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-btn { background: var(--bg-primary); border: 1px solid var(--lcars-orange); border-radius: 20px; padding: 8px 20px; font-family: 'Antonio', sans-serif; font-size: 13px; color: var(--lcars-orange); cursor: pointer; }
        .filter-btn.active, .filter-btn:hover { background: var(--lcars-orange); color: var(--bg-primary); }
        .history-list { display: flex; flex-direction: column; gap: 15px; }
        .history-item { background: rgba(255, 153, 0, 0.05); border: 1px solid var(--lcars-orange); border-radius: 0 15px 15px 0; overflow: hidden; cursor: pointer; transition: all 0.2s; }
        .history-item:hover { background: rgba(255, 153, 0, 0.1); transform: translateX(5px); }
        .history-item-header { background: var(--lcars-tan); padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; }
        .history-item-title { font-family: 'Orbitron', sans-serif; font-size: 14px; color: var(--bg-primary); }
        .history-item-badge { padding: 3px 10px; border-radius: 10px; font-size: 11px; text-transform: uppercase; }
        .badge-success { background: var(--success); color: var(--bg-primary); }
        .badge-partial { background: var(--warning); color: var(--bg-primary); }
        .badge-failed { background: var(--danger); color: white; }
        .history-item-content { padding: 15px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
        .history-field { display: flex; flex-direction: column; gap: 3px; }
        .history-label { font-size: 10px; color: var(--lcars-blue); text-transform: uppercase; }
        .history-value { font-family: 'Orbitron', sans-serif; font-size: 13px; color: var(--lcars-yellow); }
        .settings-section { margin-bottom: 30px; }
        .settings-title { font-family: 'Orbitron', sans-serif; font-size: 14px; color: var(--lcars-yellow); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--lcars-orange); }
        .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .setting-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255, 153, 0, 0.05); border: 1px solid var(--lcars-orange); border-radius: 10px; }
        .setting-info { display: flex; flex-direction: column; gap: 3px; }
        .setting-name { font-size: 14px; color: var(--lcars-yellow); }
        .setting-desc { font-size: 11px; color: var(--lcars-tan); }
        .toggle { position: relative; width: 50px; height: 26px; }
        .toggle input { opacity: 0; width: 0; height: 0; }
        .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-primary); border: 2px solid var(--lcars-orange); border-radius: 13px; transition: 0.3s; }
        .toggle-slider::before { position: absolute; content: ""; height: 18px; width: 18px; left: 2px; bottom: 2px; background: var(--lcars-orange); border-radius: 50%; transition: 0.3s; }
        .toggle input:checked + .toggle-slider { background: var(--lcars-orange); }
        .toggle input:checked + .toggle-slider::before { transform: translateX(24px); background: var(--bg-primary); }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal-overlay.active { display: flex; }
        .modal { background: var(--bg-secondary); border: 3px solid var(--lcars-orange); border-radius: 0 30px 30px 0; width: 90%; max-width: 500px; overflow: hidden; }
        .modal-header { background: var(--lcars-orange); padding: 15px 20px; }
        .modal-title { font-family: 'Orbitron', sans-serif; font-size: 16px; color: var(--bg-primary); text-transform: uppercase; letter-spacing: 2px; }
        .modal-content { padding: 25px; }
        .modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; }
        .alert-container { position: fixed; top: 20px; right: 20px; z-index: 1001; display: flex; flex-direction: column; gap: 10px; }
        .alert { background: var(--bg-secondary); border: 2px solid var(--lcars-red); border-radius: 10px; padding: 15px 20px; display: flex; align-items: center; gap: 15px; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .alert-icon { width: 30px; height: 30px; background: var(--lcars-red); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
        .alert-content { flex: 1; }
        .alert-title { font-family: 'Orbitron', sans-serif; font-size: 12px; color: var(--lcars-red); text-transform: uppercase; }
        .alert-message { font-size: 13px; color: var(--text-light); }
        @media (max-width: 768px) {
            .lcars-container { grid-template-columns: 1fr; }
            .lcars-sidebar { display: none; }
            .batch-naming { grid-template-columns: 1fr; }
            .eval-grid { grid-template-columns: 1fr; }
            .history-item-content { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="lcars-container">
        <div class="lcars-sidebar">
            <div class="lcars-sidebar-top"></div>
            <div class="lcars-elbow"><span class="lcars-elbow-text">Ferment<br>Control</span></div>
            <div class="lcars-sidebar-buttons">
                <button class="lcars-btn active" onclick="showScreen('dashboard')">Dashboard</button>
                <button class="lcars-btn lcars-btn-blue" onclick="showScreen('create')">Nouveau</button>
                <button class="lcars-btn lcars-btn-purple" onclick="showScreen('history')">Historique</button>
                <button class="lcars-btn lcars-btn-pink" onclick="showScreen('presets')">Pr√©r√©glages</button>
                <button class="lcars-btn lcars-btn-lavender" onclick="showScreen('settings')">Options</button>
            </div>
            <div class="lcars-sidebar-bottom"></div>
        </div>
        <div class="lcars-header">
            <div class="lcars-header-bar"><span class="lcars-header-title" id="screenTitle">Fermentation en cours</span></div>
            <div class="lcars-header-pill"></div>
            <div class="lcars-header-cap"></div>
        </div>
        <div class="lcars-main">
            <!-- Dashboard -->
            <div id="dashboard" class="screen active">
                <div class="dashboard-grid">
                    <div class="lcars-panel">
                        <div class="lcars-panel-header"><span class="lcars-panel-title">Temp√©rature</span><div class="lcars-panel-indicator"></div></div>
                        <div class="lcars-panel-content">
                            <div class="stat-display">
                                <span class="stat-value">31.8<span class="stat-unit">¬∞C</span></span>
                                <div class="stat-label">SHT31 Principal</div>
                                <div class="stat-target">Cible: 32¬∞C ¬±2¬∞C</div>
                            </div>
                        </div>
                    </div>
                    <div class="lcars-panel">
                        <div class="lcars-panel-header"><span class="lcars-panel-title">Humidit√©</span><div class="lcars-panel-indicator"></div></div>
                        <div class="lcars-panel-content">
                            <div class="stat-display">
                                <span class="stat-value">87<span class="stat-unit">%</span></span>
                                <div class="stat-label">Humidit√© relative</div>
                                <div class="stat-target">Cible: 85% ¬±10%</div>
                            </div>
                        </div>
                    </div>
                    <div class="lcars-panel">
                        <div class="lcars-panel-header"><span class="lcars-panel-title">Batch en cours</span></div>
                        <div class="lcars-panel-content">
                            <div class="batch-info">
                                <div class="batch-field"><span class="batch-label">R√©f√©rence</span><span class="batch-value">#T-0012</span></div>
                                <div class="batch-field"><span class="batch-label">Type</span><span class="batch-value">Tempeh</span></div>
                                <div class="batch-field"><span class="batch-label">D√©marr√©</span><span class="batch-value">05/01 14:30</span></div>
                                <div class="batch-field"><span class="batch-label">√âtape</span><span class="batch-value">2/3 - Incubation</span></div>
                            </div>
                            <div class="progress-container">
                                <div class="progress-header"><span class="progress-label">Progression</span><span class="progress-value">18h / 36h (50%)</span></div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 50%"></div></div>
                            </div>
                        </div>
                    </div>
                    <div class="lcars-panel">
                        <div class="lcars-panel-header"><span class="lcars-panel-title">Actionneurs</span></div>
                        <div class="lcars-panel-content">
                            <div class="actuators-grid">
                                <div class="actuator-item"><div class="actuator-indicator on">‚óè</div><span class="actuator-name">Chauffage</span></div>
                                <div class="actuator-item"><div class="actuator-indicator on">‚óè</div><span class="actuator-name">Humidificateur</span></div>
                                <div class="actuator-item"><div class="actuator-indicator off">‚óã</div><span class="actuator-name">Ventilo Bas</span></div>
                                <div class="actuator-item"><div class="actuator-indicator off">‚óã</div><span class="actuator-name">Ventilo Haut</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="lcars-panel">
                    <div class="lcars-panel-header"><span class="lcars-panel-title">Courbes temps r√©el</span></div>
                    <div class="lcars-panel-content"><div class="chart-container"><canvas id="tempChart"></canvas></div></div>
                </div>
                <div class="lcars-panel" style="margin-top: 20px;">
                    <div class="lcars-panel-header"><span class="lcars-panel-title">√âv√©nements</span></div>
                    <div class="lcars-panel-content">
                        <div class="events-list">
                            <div class="event-item"><span class="event-time">05/01 18:45</span><span class="event-text">Myc√©lium visible sur les bords</span></div>
                            <div class="event-item"><span class="event-time">05/01 16:20</span><span class="event-text">Retourn√© le substrat</span></div>
                            <div class="event-item"><span class="event-time">05/01 14:30</span><span class="event-text">D√©marrage fermentation</span></div>
                        </div>
                        <button class="add-event-btn" onclick="openModal('eventModal')">+ Ajouter une note</button>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-cancel" onclick="pauseBatch()">Pause</button>
                    <button class="btn-cancel" style="background: var(--lcars-red);" onclick="stopBatch()">Arr√™ter</button>
                </div>
            </div>

            <!-- Empty Dashboard -->
            <div id="dashboard-empty" class="screen">
                <div class="empty-state">
                    <div class="empty-icon"></div>
                    <h2 class="empty-title">Aucune fermentation en cours</h2>
                    <p class="empty-text">D√©marrez un nouveau batch pour commencer</p>
                    <button class="lcars-btn-large" onclick="showScreen('create')">Nouveau Batch</button>
                </div>
            </div>

            <!-- Create Batch -->
            <div id="create" class="screen">
                <div class="create-section">
                    <div class="section-header"><div class="section-number">1</div><span class="section-title">Choisir un pr√©r√©glage</span></div>
                    <div class="preset-grid">
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">ü´ò</div><div class="preset-name">Natto</div><div class="preset-code">N</div></div>
                        <div class="preset-card selected" onclick="selectPreset(this)"><div class="preset-icon">üåø</div><div class="preset-name">Tempeh</div><div class="preset-code">T</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">üçö</div><div class="preset-name">Koji Riz</div><div class="preset-code">KR</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">üåæ</div><div class="preset-name">Koji Orge</div><div class="preset-code">KM</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">ü•£</div><div class="preset-name">Miso</div><div class="preset-code">MI</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">üçµ</div><div class="preset-name">Kombucha</div><div class="preset-code">KB</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">ü•õ</div><div class="preset-name">K√©fir</div><div class="preset-code">KF</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">ü•¨</div><div class="preset-name">Kimchi</div><div class="preset-code">KI</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">ü•í</div><div class="preset-name">Lactoferment.</div><div class="preset-code">LF</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">ü•Ñ</div><div class="preset-name">Yaourt</div><div class="preset-code">Y</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">üç∂</div><div class="preset-name">Vinaigre</div><div class="preset-code">V</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">ü•ì</div><div class="preset-name">Charcuterie</div><div class="preset-code">CH</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">üêü</div><div class="preset-name">Garum</div><div class="preset-code">G</div></div>
                        <div class="preset-card" onclick="selectPreset(this)"><div class="preset-icon">‚öôÔ∏è</div><div class="preset-name">Manuel</div><div class="preset-code">X</div></div>
                    </div>
                </div>
                <div class="create-section">
                    <div class="section-header"><div class="section-number">2</div><span class="section-title">Param√©trer les √©tapes</span></div>
                    <div class="steps-container">
                        <div class="step-card">
                            <div class="step-header"><span class="step-title">√âtape 1 ‚Äî Pr√©chauffage</span><button class="step-delete">√ó</button></div>
                            <div class="step-content">
                                <div class="form-group"><label class="form-label">Temp√©rature</label><input type="number" class="form-input" value="32"></div>
                                <div class="form-group"><label class="form-label">Humidit√© %</label><input type="number" class="form-input" value="85"></div>
                                <div class="form-group"><label class="form-label">Dur√©e (h)</label><input type="number" class="form-input" value="2"></div>
                                <div class="form-group"><label class="form-label">Ventilation</label><select class="form-select"><option>D√©sactiv√©e</option><option>Cyclique</option><option>Continue</option></select></div>
                            </div>
                        </div>
                        <div class="step-card">
                            <div class="step-header"><span class="step-title">√âtape 2 ‚Äî Incubation</span><button class="step-delete">√ó</button></div>
                            <div class="step-content">
                                <div class="form-group"><label class="form-label">Temp√©rature</label><input type="number" class="form-input" value="32"></div>
                                <div class="form-group"><label class="form-label">Humidit√© %</label><input type="number" class="form-input" value="85"></div>
                                <div class="form-group"><label class="form-label">Dur√©e (h)</label><input type="number" class="form-input" value="24"></div>
                                <div class="form-group"><label class="form-label">Ventilation</label><select class="form-select"><option selected>D√©sactiv√©e</option><option>Cyclique</option><option>Continue</option></select></div>
                            </div>
                        </div>
                        <div class="step-card">
                            <div class="step-header"><span class="step-title">√âtape 3 ‚Äî Maturation</span><button class="step-delete">√ó</button></div>
                            <div class="step-content">
                                <div class="form-group"><label class="form-label">Temp√©rature</label><input type="number" class="form-input" value="30"></div>
                                <div class="form-group"><label class="form-label">Humidit√© %</label><input type="number" class="form-input" value="80"></div>
                                <div class="form-group"><label class="form-label">Dur√©e (h)</label><input type="number" class="form-input" value="10"></div>
                                <div class="form-group"><label class="form-label">Ventilation</label><select class="form-select"><option>D√©sactiv√©e</option><option selected>Cyclique</option><option>Continue</option></select></div>
                            </div>
                        </div>
                        <button class="add-step-btn">+ Ajouter une √©tape</button>
                    </div>
                </div>
                <div class="create-section">
                    <div class="section-header"><div class="section-number">3</div><span class="section-title">Ingr√©dients (optionnel)</span></div>
                    <div class="ingredient-card">
                        <div class="ingredient-header"><span class="ingredient-title">Ingr√©dient principal</span><button class="step-delete">√ó</button></div>
                        <div class="ingredient-content">
                            <div class="form-group"><label class="form-label">Nom</label><input type="text" class="form-input" value="Soja jaune"></div>
                            <div class="form-group"><label class="form-label">Origine</label><select class="form-select"><option selected>Achet√©</option><option>Autoproduit</option><option>Trouv√©</option><option>Re√ßu</option></select></div>
                            <div class="form-group"><label class="form-label">Fournisseur</label><input type="text" class="form-input" placeholder="Optionnel"></div>
                            <div class="form-group"><label class="form-label">Poids (g)</label><input type="number" class="form-input" value="500"></div>
                            <div class="form-group"><label class="form-label">Prix/kg (‚Ç¨)</label><input type="number" class="form-input" placeholder="Optionnel"></div>
                        </div>
                    </div>
                    <div class="ingredient-card">
                        <div class="ingredient-header"><span class="ingredient-title">Ferment / Starter</span><button class="step-delete">√ó</button></div>
                        <div class="ingredient-content">
                            <div class="form-group"><label class="form-label">Type</label><select class="form-select"><option selected>Spores</option><option>Levain</option><option>Starter</option><option>Culture</option></select></div>
                            <div class="form-group"><label class="form-label">Nom</label><input type="text" class="form-input" value="Rhizopus oligosporus"></div>
                            <div class="form-group"><label class="form-label">Fournisseur</label><input type="text" class="form-input" placeholder="Optionnel"></div>
                            <div class="form-group"><label class="form-label">G√©n√©ration</label><select class="form-select"><option selected>1√®re</option><option>2√®me</option><option>3√®me</option><option>4√®me+</option></select></div>
                        </div>
                    </div>
                    <button class="add-step-btn">+ Ajouter un ingr√©dient</button>
                </div>
                <div class="create-section">
                    <div class="section-header"><div class="section-number">4</div><span class="section-title">Identification du batch</span></div>
                    <div class="batch-naming">
                        <div class="form-group"><label class="form-label">Nom du batch</label><input type="text" class="form-input" value="Tempeh soja classique"></div>
                        <div class="form-group"><label class="form-label">Num√©ro</label><div class="batch-number-display"><span class="batch-number-value">#T-0012</span></div></div>
                        <div class="form-group"><label class="form-label">Date</label><div class="batch-number-display"><span class="batch-number-value">05/01/2026</span></div></div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label"><input type="checkbox" style="margin-right: 8px;">Sauvegarder comme nouveau sous-r√©glage</label>
                        <input type="text" class="form-input" placeholder="Nom du sous-r√©glage" style="margin-top: 10px;">
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-cancel" onclick="showScreen('dashboard')">Annuler</button>
                    <button class="btn-start" onclick="startBatch()">D√©marrer</button>
                </div>
            </div>
            <!-- Evaluation -->
            <div id="evaluation" class="screen">
                <div class="eval-grid">
                    <div>
                        <div class="create-section">
                            <div class="section-header"><div class="section-number">‚òÖ</div><span class="section-title">√âvaluation globale</span></div>
                            <div class="criteria-item">
                                <div class="criteria-header"><span class="criteria-name">Note g√©n√©rale</span>
                                    <div class="criteria-score"><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star">‚òÖ</div></div>
                                </div>
                            </div>
                            <div class="tags-container" style="margin-top: 15px;"><div class="tag selected">R√©ussi</div><div class="tag">Partiel</div><div class="tag">Rat√©</div><div class="tag">√Ä refaire</div></div>
                        </div>
                        <div class="create-section">
                            <div class="section-header"><div class="section-number">‚óâ</div><span class="section-title">Crit√®res d√©taill√©s</span></div>
                            <div class="eval-criteria">
                                <div class="criteria-item"><div class="criteria-header"><span class="criteria-name">Aspect visuel</span><div class="criteria-score"><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div></div></div><textarea class="criteria-comment">Myc√©lium dense et uniforme</textarea></div>
                                <div class="criteria-item"><div class="criteria-header"><span class="criteria-name">Couleur</span><div class="criteria-score"><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star">‚òÖ</div></div></div><textarea class="criteria-comment">L√©g√®rement gris√¢tre sur un bord</textarea></div>
                                <div class="criteria-item"><div class="criteria-header"><span class="criteria-name">Odeur</span><div class="criteria-score"><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div></div></div><textarea class="criteria-comment">Odeur de champignon agr√©able</textarea></div>
                                <div class="criteria-item"><div class="criteria-header"><span class="criteria-name">Texture</span><div class="criteria-score"><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star">‚òÖ</div></div></div><textarea class="criteria-comment">Ferme, bonne tenue √† la coupe</textarea></div>
                                <div class="criteria-item"><div class="criteria-header"><span class="criteria-name">Go√ªt</span><div class="criteria-score"><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star filled">‚òÖ</div><div class="star">‚òÖ</div></div></div><textarea class="criteria-comment">L√©ger go√ªt de noisette</textarea></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="create-section">
                            <div class="section-header"><div class="section-number">üì∑</div><span class="section-title">Photos</span></div>
                            <div class="photo-upload"><div class="photo-icon">üì∏</div><div class="photo-text">Cliquez pour ajouter des photos</div></div>
                            <div class="photo-grid"><div class="photo-thumb">üì∑</div><div class="photo-thumb">üì∑</div><div class="photo-thumb" style="border-style: dashed;">+</div></div>
                        </div>
                        <div class="create-section">
                            <div class="section-header"><div class="section-number">üìù</div><span class="section-title">Notes</span></div>
                            <textarea class="notes-textarea">Fermentation l√©g√®rement plus longue que pr√©vu. Temp√©rature stable.</textarea>
                        </div>
                        <div class="create-section">
                            <div class="section-header"><div class="section-number">#</div><span class="section-title">Tags</span></div>
                            <div class="tags-container"><div class="tag selected">soja jaune</div><div class="tag selected">hiver</div><div class="tag selected">36h</div><input type="text" class="tag-input" placeholder="+ Ajouter"></div>
                        </div>
                    </div>
                </div>
                <div class="action-buttons"><button class="btn-cancel">√âvaluer plus tard</button><button class="btn-start" onclick="saveEvaluation()">Enregistrer</button></div>
            </div>

            <!-- History -->
            <div id="history" class="screen">
                <div class="history-filters"><button class="filter-btn active">Tous</button><button class="filter-btn">Tempeh</button><button class="filter-btn">Natto</button><button class="filter-btn">Koji</button><button class="filter-btn">R√©ussis</button><button class="filter-btn">Rat√©s</button></div>
                <div class="history-list">
                    <div class="history-item" onclick="showScreen('evaluation')">
                        <div class="history-item-header"><span class="history-item-title">#T-0012 ‚Äî Tempeh soja classique</span><span class="history-item-badge badge-success">R√©ussi</span></div>
                        <div class="history-item-content"><div class="history-field"><span class="history-label">Date</span><span class="history-value">05/01/2026</span></div><div class="history-field"><span class="history-label">Dur√©e</span><span class="history-value">38h</span></div><div class="history-field"><span class="history-label">T¬∞ moy.</span><span class="history-value">31.8¬∞C</span></div><div class="history-field"><span class="history-label">Note</span><span class="history-value">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span></div></div>
                    </div>
                    <div class="history-item">
                        <div class="history-item-header"><span class="history-item-title">#T-0011 ‚Äî Tempeh ch√¢taigne-lentilles</span><span class="history-item-badge badge-partial">Partiel</span></div>
                        <div class="history-item-content"><div class="history-field"><span class="history-label">Date</span><span class="history-value">28/12/2025</span></div><div class="history-field"><span class="history-label">Dur√©e</span><span class="history-value">42h</span></div><div class="history-field"><span class="history-label">T¬∞ moy.</span><span class="history-value">30.5¬∞C</span></div><div class="history-field"><span class="history-label">Note</span><span class="history-value">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</span></div></div>
                    </div>
                    <div class="history-item">
                        <div class="history-item-header"><span class="history-item-title">#N-0003 ‚Äî Natto soja noir</span><span class="history-item-badge badge-success">R√©ussi</span></div>
                        <div class="history-item-content"><div class="history-field"><span class="history-label">Date</span><span class="history-value">20/12/2025</span></div><div class="history-field"><span class="history-label">Dur√©e</span><span class="history-value">24h</span></div><div class="history-field"><span class="history-label">T¬∞ moy.</span><span class="history-value">40.2¬∞C</span></div><div class="history-field"><span class="history-label">Note</span><span class="history-value">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></div></div>
                    </div>
                    <div class="history-item">
                        <div class="history-item-header"><span class="history-item-title">#KR-0005 ‚Äî Koji riz rond</span><span class="history-item-badge badge-failed">Rat√©</span></div>
                        <div class="history-item-content"><div class="history-field"><span class="history-label">Date</span><span class="history-value">15/12/2025</span></div><div class="history-field"><span class="history-label">Dur√©e</span><span class="history-value">48h</span></div><div class="history-field"><span class="history-label">T¬∞ moy.</span><span class="history-value">32.1¬∞C</span></div><div class="history-field"><span class="history-label">Note</span><span class="history-value">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ</span></div></div>
                    </div>
                </div>
            </div>

            <!-- Presets -->
            <div id="presets" class="screen">
                <div class="create-section">
                    <div class="section-header"><div class="section-number">‚öô</div><span class="section-title">Pr√©r√©glages syst√®me</span></div>
                    <div class="preset-grid">
                        <div class="preset-card"><div class="preset-icon">ü´ò</div><div class="preset-name">Natto</div><div class="preset-code">40¬∞C ‚Ä¢ 24h ‚Ä¢ 85%HR</div></div>
                        <div class="preset-card"><div class="preset-icon">üåø</div><div class="preset-name">Tempeh</div><div class="preset-code">32¬∞C ‚Ä¢ 36h ‚Ä¢ 85%HR</div></div>
                        <div class="preset-card"><div class="preset-icon">üçö</div><div class="preset-name">Koji Riz</div><div class="preset-code">30¬∞C ‚Ä¢ 48h ‚Ä¢ 80%HR</div></div>
                        <div class="preset-card"><div class="preset-icon">üåæ</div><div class="preset-name">Koji Orge</div><div class="preset-code">28¬∞C ‚Ä¢ 50h ‚Ä¢ 80%HR</div></div>
                    </div>
                </div>
                <div class="create-section">
                    <div class="section-header"><div class="section-number">‚òÖ</div><span class="section-title">Sous-r√©glages personnalis√©s</span></div>
                    <h4 style="color: var(--lcars-tan); margin: 20px 0 10px;">Tempeh</h4>
                    <div class="preset-grid">
                        <div class="preset-card"><div class="preset-icon">üå∞</div><div class="preset-name">Ch√¢taigne-lentilles</div><div class="preset-code">30¬∞C ‚Ä¢ 42h ‚Ä¢ 85%HR</div></div>
                        <div class="preset-card"><div class="preset-icon">ü´õ</div><div class="preset-name">Pois chiches</div><div class="preset-code">32¬∞C ‚Ä¢ 38h ‚Ä¢ 85%HR</div></div>
                    </div>
                    <h4 style="color: var(--lcars-tan); margin: 20px 0 10px;">Natto</h4>
                    <div class="preset-grid">
                        <div class="preset-card"><div class="preset-icon">‚ö´</div><div class="preset-name">Soja noir</div><div class="preset-code">40¬∞C ‚Ä¢ 26h ‚Ä¢ 85%HR</div></div>
                    </div>
                </div>
            </div>

            <!-- Settings -->
            <div id="settings" class="screen">
                <div class="settings-section">
                    <h3 class="settings-title">Alertes temp√©rature</h3>
                    <div class="settings-grid">
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Dur√©e phase initiale</span><span class="setting-desc">Pas d'alerte basse pendant ce temps</span></div><div class="setting-control"><input type="number" class="form-input" value="2" style="width: 60px;"> h</div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">D√©lai alerte hors plage</span><span class="setting-desc">Temps avant d√©clenchement</span></div><div class="setting-control"><input type="number" class="form-input" value="20" style="width: 60px;"> min</div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Seuil surchauffe</span><span class="setting-desc">√âcart max au-dessus consigne</span></div><div class="setting-control">+<input type="number" class="form-input" value="10" style="width: 60px;"> ¬∞C</div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">D√©lai alerte surchauffe</span><span class="setting-desc">Alerte imm√©diate apr√®s ce d√©lai</span></div><div class="setting-control"><input type="number" class="form-input" value="5" style="width: 60px;"> min</div></div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="settings-title">Alertes humidit√©</h3>
                    <div class="settings-grid">
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Tol√©rance</span><span class="setting-desc">√âcart accept√© autour consigne</span></div><div class="setting-control">¬±<input type="number" class="form-input" value="10" style="width: 60px;"> %</div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">D√©lai alerte</span><span class="setting-desc">Temps avant d√©clenchement</span></div><div class="setting-control"><input type="number" class="form-input" value="30" style="width: 60px;"> min</div></div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="settings-title">Alertes fin de batch</h3>
                    <div class="settings-grid">
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Premi√®re alerte</span><span class="setting-desc">Avant la fin th√©orique</span></div><div class="setting-control"><input type="number" class="form-input" value="2" style="width: 60px;"> h</div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Deuxi√®me alerte</span><span class="setting-desc">Avant la fin th√©orique</span></div><div class="setting-control"><input type="number" class="form-input" value="1" style="width: 60px;"> h</div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Troisi√®me alerte</span><span class="setting-desc">Avant la fin th√©orique</span></div><div class="setting-control"><input type="number" class="form-input" value="30" style="width: 60px;"> min</div></div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="settings-title">S√©curit√©</h3>
                    <div class="settings-grid">
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Temp√©rature max absolue</span><span class="setting-desc">Coupure d'urgence au-del√†</span></div><div class="setting-control"><input type="number" class="form-input" value="60" style="width: 60px;"> ¬∞C</div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Bascule auto sur backup</span><span class="setting-desc">Si capteur principal HS</span></div><div class="setting-control"><label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label></div></div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="settings-title">Acc√®s distant</h3>
                    <div class="settings-grid">
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Tailscale</span><span class="setting-desc">VPN pour acc√®s hors r√©seau local</span></div><div class="setting-control"><button class="filter-btn">Configurer</button></div></div>
                        <div class="setting-item"><div class="setting-info"><span class="setting-name">Authentification</span><span class="setting-desc">Requis pour acc√®s distant</span></div><div class="setting-control"><label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label></div></div>
                    </div>
                </div>
            </div>

            <!-- Complete -->
            <div id="complete" class="screen">
                <div class="empty-state">
                    <div class="empty-icon" style="border-color: var(--success);"><span style="font-size: 60px; color: var(--success);">‚úì</span></div>
                    <h2 class="empty-title" style="color: var(--success);">Fermentation termin√©e</h2>
                    <p class="empty-text">Veuillez retirer le produit de la chambre</p>
                    <p class="empty-text" style="font-family: 'Orbitron'; color: var(--lcars-yellow);">#T-0012 ‚Äî Tempeh soja classique</p>
                    <button class="lcars-btn-large" style="background: var(--success); margin-top: 20px;" onclick="showScreen('evaluation')">Chambre vid√©e</button>
                </div>
            </div>
        </div>
        <div class="lcars-footer"><div class="lcars-footer-bar"><span class="lcars-footer-text">Syst√®me nominal ‚Ä¢ 05/01/2026 14:32</span></div><div class="lcars-footer-cap"></div></div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="eventModal">
        <div class="modal">
            <div class="modal-header"><span class="modal-title">Ajouter une note</span></div>
            <div class="modal-content">
                <div class="form-group"><label class="form-label">√âv√©nement</label><input type="text" class="form-input" placeholder="Ex: Myc√©lium visible..."></div>
                <div class="modal-actions"><button class="btn-cancel" onclick="closeModal('eventModal')">Annuler</button><button class="btn-start" onclick="addEvent()">Ajouter</button></div>
            </div>
        </div>
    </div>
    <div class="alert-container" id="alertContainer"></div>

    <script>
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            const titles = {'dashboard': 'Fermentation en cours', 'dashboard-empty': 'Aucune fermentation', 'create': 'Nouveau batch', 'evaluation': '√âvaluation du batch', 'history': 'Historique', 'presets': 'Pr√©r√©glages', 'settings': 'Options', 'complete': 'Fermentation termin√©e'};
            document.getElementById('screenTitle').textContent = titles[id] || 'Chambre de fermentation';
        }
        function selectPreset(el) { document.querySelectorAll('.preset-card').forEach(c => c.classList.remove('selected')); el.classList.add('selected'); }
        function openModal(id) { document.getElementById(id).classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }
        function addEvent() {
            const input = document.querySelector('#eventModal input');
            if (input.value) {
                const list = document.querySelector('.events-list');
                const now = new Date();
                const time = now.toLocaleDateString('fr-FR', {day:'2-digit',month:'2-digit'}) + ' ' + now.toLocaleTimeString('fr-FR', {hour:'2-digit',minute:'2-digit'});
                list.insertAdjacentHTML('afterbegin', '<div class="event-item"><span class="event-time">' + time + '</span><span class="event-text">' + input.value + '</span></div>');
                input.value = ''; closeModal('eventModal');
            }
        }
        function startBatch() { showAlert('Batch d√©marr√©', '#T-0012 en cours'); showScreen('dashboard'); }
        function pauseBatch() { showAlert('Pause', '√âv√©nement logg√©'); }
        function stopBatch() { if(confirm('Arr√™ter la fermentation ?')) showScreen('complete'); }
        function saveEvaluation() { showAlert('Enregistr√©', 'Batch #T-0012 archiv√©'); showScreen('history'); }
        function showAlert(title, msg) {
            const c = document.getElementById('alertContainer');
            c.insertAdjacentHTML('beforeend', '<div class="alert"><div class="alert-icon">!</div><div class="alert-content"><div class="alert-title">' + title + '</div><div class="alert-message">' + msg + '</div></div></div>');
            setTimeout(() => { const a = c.querySelector('.alert'); if(a) a.remove(); }, 5000);
        }
        document.querySelectorAll('.filter-btn').forEach(b => { b.addEventListener('click', function() { this.parentElement.querySelectorAll('.filter-btn').forEach(x => x.classList.remove('active')); this.classList.add('active'); }); });
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('tempChart').getContext('2d');
            const labels = [], tempReal = [], tempTarget = [], humidity = [];
            for (let i = 0; i < 36; i++) { labels.push(i + 'h'); tempTarget.push(32); tempReal.push(30 + Math.random() * 4 + (i < 4 ? i * 0.5 : 0)); humidity.push(80 + Math.random() * 10); }
            new Chart(ctx, {
                type: 'line',
                data: { labels: labels, datasets: [
                    { label: 'Temp√©rature r√©elle', data: tempReal.slice(0, 18), borderColor: '#ff9900', backgroundColor: 'rgba(255,153,0,0.1)', fill: true, tension: 0.3, borderWidth: 2 },
                    { label: 'Temp√©rature cible', data: tempTarget.slice(0, 18), borderColor: '#ffcc00', borderDash: [5, 5], fill: false, borderWidth: 2 },
                    { label: 'Humidit√© %', data: humidity.slice(0, 18), borderColor: '#9999ff', backgroundColor: 'rgba(153,153,255,0.1)', fill: true, tension: 0.3, borderWidth: 2, yAxisID: 'y1' }
                ]},
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: '#ff9900', font: { family: 'Antonio' } } } },
                    scales: { x: { grid: { color: 'rgba(255,153,0,0.2)' }, ticks: { color: '#ff9900' } }, y: { min: 20, max: 45, grid: { color: 'rgba(255,153,0,0.2)' }, ticks: { color: '#ff9900', callback: v => v + '¬∞C' } }, y1: { position: 'right', min: 50, max: 100, grid: { drawOnChartArea: false }, ticks: { color: '#9999ff', callback: v => v + '%' } } }
                }
            });
        });
    </script>
</body>
</html>
